# Kolacik Session Log

## 2026-01-08 - Initial Setup

### What We Did
- Forked Strudel from codeberg.org/uzu/strudel
- Created kolacik theme (near-black background, Operator Mono font, orange keywords, teal strings)
- Built live sync system: Claude can push code to browser via playground.strudel
- Started learning Strudel basics

### Live Sync Architecture
- `sync-server.mjs` - WebSocket server on port 4322, watches playground.strudel
- `website/src/repl/sync.mjs` - client that connects and syncs with editor
- Modified `useReplContext.jsx` to hook into sync

### Files Created
- `playground.strudel` - live code scratchpad
- `sync-server.mjs` - sync server
- `claude.md` - teaching instructions
- `what_jura_knows.md` - knowledge state
- `plan.md` - learning plan
- `packages/codemirror/themes/kolacik.mjs` - custom theme

### Jura's Progress
- Learned: euclidean rhythms, polymetric, struct, off vs delay, wet/dry
- Next: scales, notes, .add(), more pattern modifiers

### To Start Dev
```bash
pnpm dev
node sync-server.mjs &
# open localhost:4321
```

## 2026-01-08 - Session 2: Quiz & Error Feedback

### What We Did
- Ran quiz to assess Jura's knowledge - he knows more than documented
- Built bidirectional error sync system:
  - `playground.errors` - warnings/errors written here so Claude can see them
  - Toast notifications in UI (bottom-right, orange)
  - Modified `useLogger.jsx` to forward warnings to sync server
  - Modified `sync-server.mjs` to write errors to file
  - Modified `value.mjs` to give helpful error message for `.add()` gotcha

### Key Technical Findings
- `.add(12)` silently fails - must use `.add(note(12))`
- Can't mix samples and notes in same `note()` pattern - use `stack()` or separate `$:` lines
- Out-of-range notes (like `c90`) fail silently - TODO: add warning
- HMR doesn't always reload core package changes - need hard refresh
- `useLogger` hook was only active when Panel was open - moved to Repl.jsx

### Files Modified
- `sync-server.mjs` - added error message handling
- `website/src/repl/sync.mjs` - added `sendError()` function
- `website/src/repl/components/useLogger.jsx` - forward warnings to sync + toast
- `website/src/repl/Repl.jsx` - added Toast component, call useLogger always
- `packages/core/value.mjs` - improved warning message with fix hint

### Files Created
- `playground.errors` - error sync file

### Next Session
- Continue learning: scales, chords, more effects
- Add validation for out-of-range notes
